<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.iu.home.board.BoardMapper">

<insert id="setAdd" parameterType="BoardVO">
INSERT INTO BOARD VALUES (null, #{writer}, #{title}, #{contents}, 0, sysdate())
</insert>

<select id="getList" parameterType="Pager" resultType="BoardVO">
SELECT * FROM BOARD
WHERE 
<choose>
	<when test="kind == 'title'">TITLE</when>
	<when test="kind == 'contents'">CONTENTS</when>
	<otherwise>WRITER</otherwise>
</choose>
LIKE CONCAT('%', #{search}, '%')
ORDER BY NUM DESC
LIMIT #{startRow}, #{perPage}
</select>

<select id="getCount" parameterType="Pager" resultType="Long">
SELECT COUNT(NUM) FROM BOARD
WHERE 
<choose>
	<when test="kind == 'title'">TITLE</when>
	<when test="kind == 'contents'">CONTENTS</when>
	<otherwise>WRITER</otherwise>
</choose>
LIKE CONCAT('%', #{search}, '%')
ORDER BY NUM DESC
</select>
	
</mapper>